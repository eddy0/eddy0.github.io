<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="node">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="node">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="node">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>node</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">node</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/14/redux-reducer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/redux-reducer/" itemprop="url">redux-reducer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-14T18:26:57-07:00">
                2018-05-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="combineReducer-多个-reducer-的情况"><a href="#combineReducer-多个-reducer-的情况" class="headerlink" title="combineReducer 多个 reducer 的情况"></a>combineReducer 多个 reducer 的情况</h1><p>用一个函数把 state 接住, 返回 reducer 的结果<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> todos = (states=[], action) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> goals = (states=[], action) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app =  (state = &#123;&#125;, action) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    todos: todos(state.todos, action),</span><br><span class="line">    goals: goals(state.goals, action)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/14/redux-state/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/14/redux-state/" itemprop="url">reudx-state</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-14T14:29:27-07:00">
                2018-05-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>APP 包含 UI 和 state</p>
<h1 id="Redux-–-to-make-state-more-predictable"><a href="#Redux-–-to-make-state-more-predictable" class="headerlink" title="Redux – to make state more predictable"></a>Redux – to make state more predictable</h1><p>在 react 里面, app 里面有很多 component, 并且包含很多 state, 这样不便于管理.<br>redux 就是建立一个 state tree</p>
<h1 id="state-tree-的作用"><a href="#state-tree-的作用" class="headerlink" title="state tree 的作用"></a>state tree 的作用</h1><ul>
<li>shared cache, 不需要一个传递</li>
<li>preditable state changes 统一设定改变 state 规则, how and when 改变 state</li>
<li>improved developer tooling 保存 state, 把相关数据联系起来</li>
<li>pure functions 便于测试</li>
<li>server rendering 不需要 split data</li>
</ul>
<h1 id="如何沟通-–-Store-是什么"><a href="#如何沟通-–-Store-是什么" class="headerlink" title="如何沟通 – Store 是什么"></a>如何沟通 – Store 是什么</h1><ol>
<li>state tree</li>
<li>the way to get the state from the state tree</li>
<li>the way to listen the state tree change 知道哪里改变了</li>
<li>the way to update the state tree</li>
</ol>
<h1 id="redux-实质就是发布订阅模式的应用"><a href="#redux-实质就是发布订阅模式的应用" class="headerlink" title="redux 实质就是发布订阅模式的应用"></a>redux 实质就是发布订阅模式的应用</h1><ul>
<li>getState 拿到 state tree 里面的所有的 state</li>
<li>subcribe 就是保存监听函数, 并且如果再调用的话就把这个监听的事件 remove 掉</li>
<li>action 就是描述 state change 的一些信息, 就是用一个 object 来保存提供注册事件的信息, 提供 type 和 type 对应的信息, type 是必须的, state 改变的时候根据 action 里面的 type 和提供的数据 (比如 id 信息, todo 的内容) 来得到一个新的 state (reducer)   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    type: <span class="string">'add'</span>,</span><br><span class="line">    todo: &#123;</span><br><span class="line">        id: <span class="number">0</span>,</span><br><span class="line">        task: iifj,</span><br><span class="line">        complete: <span class="literal">false</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="pure-function-—-不改变原来的数据-类似-slice-predictable"><a href="#pure-function-—-不改变原来的数据-类似-slice-predictable" class="headerlink" title="pure function — 不改变原来的数据 (类似 slice )  predictable"></a>pure function — 不改变原来的数据 (类似 slice )  predictable</h1><ul>
<li>always return the same result given the same arguments.</li>
<li>execution doesn’t depend on the state of the application.</li>
<li>don’t modify the variables outside of their scope.</li>
</ul>
<h1 id="Ruducer-实质就是-pure-function"><a href="#Ruducer-实质就是-pure-function" class="headerlink" title="Ruducer 实质就是 pure function"></a>Ruducer 实质就是 pure function</h1><ul>
<li><p>如何把 state 和 action 联系起来<br>用一个 pure function, 如果 action 的 type 为设置的 type, 那么就拿到这个 action 的信息, 并且用 concat Store 里面的拿到的初始 state 值 (如果 state 是 undefined, 就设置为 []) 来返回新的 state, 这样就不会改变原来的 state 的值, 保证这个函数是静态的, 完全可以预知的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (action.type === <span class="string">'add'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state.concat([action.todo])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>reducer 实质<br>reducer 其实就是一个监听事件的回调函数, 当触发 aciton 里面的 type 的时候, 就返回的 state (aciton 里面的 todo 更新到 state 里面去 )</p>
</li>
</ul>
<h1 id="dispatch-—-update-state"><a href="#dispatch-—-update-state" class="headerlink" title="dispatch — update state"></a>dispatch — update state</h1><ol>
<li>参数为 action, 这样可以调用 todos (reducer) 返回新的 state</li>
<li>执行监听函数, 更加新的 state 来改变一些状态或者更新页面</li>
</ol>
<h1 id="reducer-总结"><a href="#reducer-总结" class="headerlink" title="reducer 总结"></a>reducer 总结</h1><ol>
<li>Store 里面保存了所有的 todos</li>
<li>action 里面保存了 key (type) 和 新的 todo 的信息</li>
<li>reducer 是监听 type 和 更新 todos 的事件</li>
<li>subscribe 保存了一堆回调函数</li>
<li>dispatch 来触发</li>
</ol>
<p>dispatch 就是提供一个 action, reducer 就会找到 action 里面的 type, 如果符合要求, 就调用改变 todos 的回调函数, 再根据新的 todos 执行 subscribe 函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> createStore = <span class="function">(<span class="params">reducer</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// state 是所有的数据</span></span><br><span class="line">    <span class="keyword">let</span> state</span><br><span class="line">    <span class="comment">// listener 所有的事件函数</span></span><br><span class="line">    <span class="keyword">let</span> listeners = []</span><br><span class="line">    <span class="keyword">let</span> o = &#123;&#125;</span><br><span class="line">    <span class="comment">// getState 是拿到所有的 state</span></span><br><span class="line">    o.getState = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> state</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// subscribe 保存注册监听事件, 并且返回一个函数, 用来取消注册</span></span><br><span class="line">    o.subscribe = <span class="function">(<span class="params">listener</span>) =&gt;</span> &#123;</span><br><span class="line">        listeners.push(listener)</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            listeners = listeners.filter(<span class="function">(<span class="params">l</span>) =&gt;</span> l !== listener)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// dispath a perticular action</span></span><br><span class="line">    <span class="comment">// 通过参数 action 来更新 state, 并且调用所有的监听函数</span></span><br><span class="line">    o.dispatch = <span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">        state = reducer(state, action)</span><br><span class="line">        listeners.forEach(<span class="function">(<span class="params">listener</span>) =&gt;</span> listener() )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> o</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todos = <span class="function">(<span class="params">state = [], action</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (action.type === <span class="string">'add'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> state.concat([action.todo])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> action = &#123;</span><br><span class="line">    type: <span class="string">'add'</span>,</span><br><span class="line">    todo: &#123;</span><br><span class="line">        id: <span class="number">0</span>,</span><br><span class="line">        task: <span class="string">'iifj'</span>,</span><br><span class="line">        done: <span class="literal">false</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数是改变 state 的函数 (reducer)</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(todos)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> unsubscribe = store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'store'</span>, store.getState())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新 state, 并且调用监听函数</span></span><br><span class="line">store.dispatch(action)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把这个注册的函数删除掉</span></span><br><span class="line">unsubscribe()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这个时候只会增加 state, 但是不会调用 console.log , 因为那个函数被删除了</span></span><br><span class="line">store.dispatch(action)</span><br><span class="line"></span><br><span class="line">store.getState()</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/12/react-native-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/12/react-native-1/" itemprop="url">Native</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-12T21:31:26-07:00">
                2018-05-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="React-Native"><a href="#React-Native" class="headerlink" title="React Native"></a>React Native</h1><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>Micro-animations</li>
<li>view hierarchies</li>
<li>deliberate route transitions</li>
<li>strategic caching</li>
</ul>
<h4 id="app-和-web-的区别"><a href="#app-和-web-的区别" class="headerlink" title="app 和 web 的区别"></a>app 和 web 的区别</h4><ul>
<li>web<ol>
<li>on the web you’re typically mapping some URL to a specific UI</li>
<li>Make the URL your first thought, not an after-thought.</li>
</ol>
</li>
<li>native app<ol>
<li>think of your routes in terms of layers rather than URL to UI mappings.</li>
<li>These routing layers will structure themselves in a stack format, When you transition between routes in React Native you’re essentially just pushing or popping a new route onto or from the route stack.</li>
<li>need to think about how one route will transition into the next. —-scene configurations.</li>
</ol>
</li>
</ul>
<h4 id="IOS-vs-Android"><a href="#IOS-vs-Android" class="headerlink" title="IOS vs Android"></a>IOS vs Android</h4><p>IOS</p>
<ul>
<li>同等级, 从左到右, 从下到上<br>Android</li>
<li>创建一个仰视的改变</li>
</ul>
<h4 id="web-elements-vs-Native-Elements"><a href="#web-elements-vs-Native-Elements" class="headerlink" title="web elements vs Native Elements"></a>web elements vs Native Elements</h4><p>web</p>
<ul>
<li>使用 div, a, span 标签<br>native</li>
<li>使用 view, text 标签</li>
</ul>
<h4 id="—-类似-div"><a href="#—-类似-div" class="headerlink" title=" — 类似 div"></a><view> — 类似 div</view></h4><p><view> maps directly to the native equivalent for whichever platform you’re currently on</view></p>
<h4 id=""><a href="#" class="headerlink" title=""></a><text></text></h4><p>展示文字, It’s important to note that you can’t render any text that isn’t wrapped in a <text>text component</text></p>
<h4 id="-1"><a href="#-1" class="headerlink" title=""></a><image></image></h4><h4 id="-2"><a href="#-2" class="headerlink" title=""></a><textinput></textinput></h4><p>onChangeText: whenever the text in the input field changes.</p>
<h4 id="-3"><a href="#-3" class="headerlink" title=""></a><touchablehighlight><touchableopacity><touchablewithoutfeedback></touchablewithoutfeedback></touchableopacity></touchablehighlight></h4><ul>
<li>事件  onPress, 但是不常用</li>
<li><touchablehighlight> 减少 opacity, 下层颜色会闪过</touchablehighlight></li>
<li><touchableopacity> 减少 opacity, 下层颜色不会闪</touchableopacity></li>
<li><touchablewithoutfeedback>, 触发 onPress, 调用 callback, 但是不会给用户 feedback</touchablewithoutfeedback></li>
</ul>
<h4 id="-4"><a href="#-4" class="headerlink" title=""></a><activityindicator></activityindicator></h4><p>The default loading indicator<br>it will also change its default styling based on the specific platform it’s on.</p>
<h4 id="-5"><a href="#-5" class="headerlink" title=""></a><webview></webview></h4><p>render web content into you app</p>
<h4 id="-6"><a href="#-6" class="headerlink" title=""></a><scrollview></scrollview></h4><p>way to render large lists — ListView, 与 View 的区别就是可以滑动, 比如长页面</p>
<h4 id="-7"><a href="#-7" class="headerlink" title=""></a><listview></listview></h4><p>render elements that are currently showing on the screen,  ListView actually uses ScrollView under the hood</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/10/resume/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/10/resume/" itemprop="url">resume</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-10T21:19:50-07:00">
                2018-05-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前端技能</p>
<h3 id="HMTL-CSS"><a href="#HMTL-CSS" class="headerlink" title="HMTL / CSS"></a>HMTL / CSS</h3><ul>
<li>熟练掌握 HTML 和 CSS, 能够实现复杂的布局</li>
<li>熟练掌握响应式设计, 布局设计遵循移动优先的规则</li>
<li>了解网格系统, 实现了一个网格系统的基本框架</li>
<li>熟练使用 css 的预处理器 (SASS)</li>
</ul>
<h3 id="ECMAScript-JavaScript"><a href="#ECMAScript-JavaScript" class="headerlink" title="ECMAScript (JavaScript)"></a>ECMAScript (JavaScript)</h3><ul>
<li>熟练掌握 JavaScript, 能在开发中熟练运用</li>
<li>熟悉 ES6 的新标准, 并熟练运用其中的新特性 (let, const, class, deconstructing, …args)</li>
</ul>
<h3 id="DOM-BOM"><a href="#DOM-BOM" class="headerlink" title="DOM / BOM"></a>DOM / BOM</h3><ul>
<li>熟练运用 DOM API 对页面进行操作, 实现事件委托和事件绑定, 并且对常用的 DOM 操作进行了封装</li>
<li>熟悉 BOM API 操作, 利用 location 和 history 的属性实现 SPA.</li>
<li>使用原生 JS 和 CSS 封装了一个 类似于 menu 的 popover 组件</li>
<li>利用 JS 的自定义事件封装了一个模拟弹窗组件的类</li>
</ul>
<h3 id="AJAX-HTTP"><a href="#AJAX-HTTP" class="headerlink" title="AJAX / HTTP"></a>AJAX / HTTP</h3><ul>
<li>掌握 HTTP 协议, 理解 HTTP/ 1.1 的请求和响应格式</li>
<li>熟悉原生 AJAX, 并进行 promise 的封装, 实现类似 fetch 的功能, 不仅解决了异步的问题, 还可以与 Promise.all 配合来解决循环 AJAX 请求的问题</li>
<li>理解 HTTP 底层的 socket 模块 , 能够利用 net 和 tls 模块开发服务器</li>
<li>了解 RESTful API 的设计模式和理念</li>
</ul>
<h3 id="node-js-Express"><a href="#node-js-Express" class="headerlink" title="node.js / Express"></a>node.js / Express</h3><ul>
<li>熟悉 node.js , 利用 Express 框架开发博客系统</li>
</ul>
<h3 id="React-js"><a href="#React-js" class="headerlink" title="React.js"></a>React.js</h3><ul>
<li>熟悉 React , 利用 React  和 react-router-dom 建立 SPA.</li>
<li>配置 webpack4, 对 react 和 express 进行同构, 实现 SSR</li>
</ul>
<h3 id="数据结构和算法"><a href="#数据结构和算法" class="headerlink" title="数据结构和算法"></a>数据结构和算法</h3><ul>
<li>了解常见的数据结构 (栈, 队列, 链表, 哈希表) 的性质和时间复杂度, 能够实现这些数据结构的 CRUD</li>
</ul>
<h3 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h3><ul>
<li>了解网络攻击的基本手段 (csrf 和 xss) 和基本的应对思路 (token &amp; autoescape)</li>
</ul>
<h3 id="加密原理"><a href="#加密原理" class="headerlink" title="加密原理"></a>加密原理</h3><ul>
<li>了解摘要和加盐的原理, 利用 node 的 crypto 模块实现加盐摘要</li>
<li>了解非对称加密, 了解 HTTPS 的加密机制和证书体系</li>
</ul>
<h1 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h1><h4 id="博客系统"><a href="#博客系统" class="headerlink" title="博客系统"></a>博客系统</h4><ul>
<li><p>前端</p>
<ol>
<li>主页<ul>
<li>采用<strong>flex 布局</strong>, 使得页面整体有较好的展示效果, 页面采用<strong>响应式设计</strong>, 保证移动端设备较好的阅读体验</li>
<li>大部分采用 AJAX 的方式通信: 利用原生 AJAX 向后端发请求实现内容简介和详情内容的切换; <strong>利用封装的模拟弹窗实现登录弹窗</strong>, 并且利用 AJAX 模拟表单功能来验证登录; 点赞功能和收藏功能都是通过 AJAX 把数据发送给服务器; 此外发布新博客页面也采用了 AJAX 来上传内容并且在成功之后自动跳转到详情页面;</li>
<li>原生 JS 实现的动效: 动态显示 top 按钮, 利用原生 JS 实现回到顶部的动画; 点击评论 icon 可以自动跳转到博客详情页面并且滑动到评论区</li>
</ul>
</li>
<li>注册页面<ul>
<li>注册用户页面实现了一些基本的用户注册合格验证的<strong>交互</strong>, 并且<strong>通过 AJAX 来判断注册的用户名是否可以使用</strong></li>
</ul>
</li>
<li>用户页面<ul>
<li>利用 H5 的 audio 标签实现了一个<strong>音乐播放器</strong>, 实现暂停, 播放, 按钮和歌单切换歌曲播放.</li>
<li>用户页面通过 BOM 的 history.pushState 和 window 的 popstate 实现了一个<strong>单页应用</strong>, 这样实现可以保证浏览器回头/ 前进操作时播放器不中断</li>
<li>用户编辑页面的图片上传实现点击图片上传并且返回上传后的图片</li>
</ul>
</li>
</ol>
</li>
<li><p>后端</p>
<ul>
<li>使用 node 和 Express 框架实现了一个博客系统, 通过 vps 部署在云服务器上,    NGINX 代理转发请求, pm2 来守护进程, 通过 ssh 从 git 仓库获取代码和登录服务器, 熟悉常用的 Linux 操作</li>
<li>项目结构使用 MVC 结构, 项目结构模块化, 结构清晰, 易于维护和拓展.</li>
<li>项目采用 nunjucks 模板引擎, 有效实现HTML渲染和首屏优化.</li>
<li>利用 express 的中间件实现了 loginRequired, currentUser 等拦截器, 博客详情页面和收藏, 点赞功能需要登录才能生效</li>
<li>用户注册密码采用加盐摘要, 防止撞库的风险, 保证用户安全.</li>
<li>(这里需要补充的…采用mongoose 来保存数据, 并且采用 redis 来保存用户 session)</li>
</ul>
</li>
</ul>
<h4 id="canvas-小游戏"><a href="#canvas-小游戏" class="headerlink" title="canvas 小游戏"></a>canvas 小游戏</h4><ul>
<li>使用 H5 的 canvas 实现打砖块游戏, 场景, 材质和底层机制分离并且模块化处理, 结构清晰.</li>
<li>实现场景切换功能, 梳理了不同组件之间的逻辑, 克服了场景和底层机制交叉引用的困难, 并且通过继承父类的方式实现场景自动更新, 初步基本实现了一个小游戏运行机制, 使得开发游戏底层机制更加高效, 易复用</li>
<li>此外还利用 DOM 操作实现 debug 模式 ( 暂停和拖拽 ) 和关卡编辑器.</li>
</ul>
<h4 id="聊天室"><a href="#聊天室" class="headerlink" title="聊天室"></a>聊天室</h4><ul>
<li>通过 electron 和 sockiet.io 实现一个匿名在线聊天室的桌面化程序.</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/27/expressNote/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/27/expressNote/" itemprop="url">expressNote</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-27T15:15:43-07:00">
                2018-03-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="express-res-locals"><a href="#express-res-locals" class="headerlink" title="express res.locals"></a>express res.locals</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">res.locals = &#123;</span><br><span class="line">  name: <span class="string">'local'</span>,</span><br><span class="line">  message: <span class="string">'ok'</span></span><br><span class="line">&#125;</span><br><span class="line">res.render(<span class="string">'html'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 html中, 可以直接在模板字符串里面得到 local 的值 &#123;&#123; name &#125;&#125;</span></span><br><span class="line"><span class="comment">// 一般与 session一起用</span></span><br><span class="line">response.locals.flash =  request.session.flash</span><br><span class="line"><span class="keyword">delete</span> request.session.flash</span><br><span class="line">next</span><br><span class="line"><span class="comment">// &#123;&#123; flash.message   &#125;&#125;   &#123;&#123; flash.name  &#125;&#125;</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/22/promise-and-async/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/22/promise-and-async/" itemprop="url">promise and async</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-22T00:42:34-07:00">
                2018-03-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h1><ul>
<li><p>Promise 构造函数包含一个参数和一个带有 resolve（解析）和 reject（拒绝）两个参数的回调。在回调中执行一些操作（例如异步），如果一切都正常，则调用 resolve，否则调用 reject。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new Promise( resolve, reject ).then( success, erro )</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do a thing, possibly async, then…</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* everything turned out fine */</span>) &#123;</span><br><span class="line">    resolve(<span class="string">"Stuff worked!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(<span class="built_in">Error</span>(<span class="string">"It broke"</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result); <span class="comment">// "Stuff worked!"</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err); <span class="comment">// Error: "It broke"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>ajax 执行 promise</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do a thing, possibly async, then…</span></span><br><span class="line">  <span class="keyword">var</span> r = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">  r.open(<span class="string">'GET'</span>, url)</span><br><span class="line">  r.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (r.status === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="comment">// Resolve the promise with the response text</span></span><br><span class="line">        resolve(r.response);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(<span class="built_in">Error</span>(r.statusText));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  r.send()</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Return a new promise.</span></span><br><span class="line">  <span class="keyword">return</span> promise</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Handle network errors</span></span><br><span class="line">    req.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      reject(<span class="built_in">Error</span>(<span class="string">"Network Error"</span>));</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Make the request</span></span><br><span class="line">    req.send();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>then 可以继续链式操作, 比如 <code>get(url).then().then().then()</code>.  </li>
<li>then() 只有一个参数的时候上一个结果表示成功的回调, 如果失败则不调用then(), 直接跳到 catch()</li>
<li>复杂的 catch 和 then 结合<ul>
<li>promise().then(fuc1).catch(fuc2) 上一个promise() 结果成功的时候调用 fuc1 , 如果失败时候进入 fuc2, 然后 fuc1 被拒绝的时候又调用 fuc2  </li>
<li>then(fuc1, fuc2).catch(error).then(good) 表示<ol>
<li>上一个结果成功时候调用fuc1， 然后 fuc1 成功的时候调用 good, 如果失败, 则进入error, 最后如果 error 成功则调用 good</li>
<li>上一个结果失败的时候调用 fuc2, 然后 fuc2 成功的时候直接调用 good, 如果失败, 则进入error, 最后如果 error 成功则调用 good</li>
</ol>
</li>
</ul>
</li>
<li>promise 的回调如果发生错误, 也会被拒绝直接进入 catch(error)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">asyncThing1().then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncThing2();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncThing3();</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncRecovery1();</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncThing4();</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> asyncRecovery2();</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Don't worry about it"</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"All done!"</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">执行 <span class="number">1</span>, 如果成功则进入 <span class="number">2</span>, 如果失败则进入 recovery <span class="number">1</span></span><br><span class="line">          <span class="number">2</span>: 成功则进入 <span class="number">3</span>  , 失败则进入 recovery <span class="number">1</span></span><br><span class="line">                <span class="number">3</span>: 成功则进入 <span class="number">4</span>,                         失败则进入 recovery <span class="number">1</span></span><br><span class="line">                    <span class="number">4</span>: 成功进入 all done, 失败进入 r2</span><br><span class="line">                                                             r1: 成功则进入 <span class="number">4</span>, 失败则进入 r2</span><br><span class="line">                                          r2 成功进入 all done, 失败进入 err</span><br><span class="line">                                                            进入all done</span><br></pre></td></tr></table></figure>
<h1 id="创建序列"><a href="#创建序列" class="headerlink" title="创建序列"></a>创建序列</h1><ul>
<li><p>Promise.resolve().then()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urlArray.reduce( <span class="function">(<span class="params">sequence, url</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sequence.then( <span class="function"><span class="params">()</span> =&gt;</span> NextUrl(url) ).then( <span class="function">(<span class="params">content</span>) =&gt;</span> doSomething(content) )</span><br><span class="line">&#125;, <span class="built_in">Promise</span>.resolve() )</span><br></pre></td></tr></table></figure>
</li>
<li><p>Promise.all() — Promise.all 包含一组 promise，并创建一个在所有内容成功完成后执行的 promise。您将获得一组结果（即一组 promise 执行的结果），其顺序与与传入 promise 的顺序相同。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all(urls.map(getUrl)).then()</span><br></pre></td></tr></table></figure>
</li>
<li><p>边下载边显示 – 所有连接成功之后开始按顺序获取序列的内容, 获取一个就加载到页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Urls.map(getJSON)</span><br><span class="line">    .reduce(<span class="function"><span class="keyword">function</span>(<span class="params">sequence, chapterPromise</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> sequence.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> chapterPromise;</span><br><span class="line">      &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">chapter</span>) </span>&#123;</span><br><span class="line">        addHtmlToPage(chapter.html);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="built_in">Promise</span>.resolve());</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h1><ul>
<li><code>*</code>号表示 generator， yield 是返回的位置<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">addGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    i += <span class="keyword">yield</span> i;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/22/promise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/22/promise/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-22T00:41:29-07:00">
                2018-03-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/12/css禁止换行/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/12/css禁止换行/" itemprop="url">css禁止换行</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-12T18:35:26-07:00">
                2018-03-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>overflow: hidden; /<em> 超出隐藏 </em>/<br>text-overflow: ellipsis; /<em> 文字省略号 </em>/<br>word-break: keep-all; /<em> 禁止文字中断 </em>/<br>white-space: nowrap; /<em> 空白不允许换行 </em>/</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">overflow: hidden;</span><br><span class="line">text-overflow: ellipsis;</span><br><span class="line">word-break: keep-all;</span><br><span class="line">white-space: nowrap;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/30/node11-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/30/node11-1/" itemprop="url">node12</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-30T11:10:08-08:00">
                2018-01-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="csrf-跨站请求伪造-coress-site-request-forgery"><a href="#csrf-跨站请求伪造-coress-site-request-forgery" class="headerlink" title="csrf 跨站请求伪造 coress-site request forgery"></a>csrf 跨站请求伪造 coress-site request forgery</h1><ul>
<li>get 方案 img标签 不用点击就可以被攻击, 浏览器自动发 img src 请求</li>
<li><p>form 方案  用 script 的 click() 可以实现刷新自动点击提交</p>
</li>
<li><p>预防</p>
<ol>
<li>发请求的时候带一个一次性有效的随机值, 服务器收到之后比对一下</li>
<li>验证码来预防 csrf</li>
</ol>
</li>
<li>原理<ul>
<li>get 的 index 里面生成随机值作为 token, 然后把 csrfToken[token] = u.id</li>
<li>在 a 标签里面加上 ？token=</li>
<li>删除操作里面拿到 token, 并且一致性判断, token in csrfToken &amp;&amp; csrfToken[token] === u.id , 成功则删掉这个的token, <code>delete csrfToken[token]</code>, 这个实现一次性.</li>
</ul>
</li>
</ul>
<h1 id="xss"><a href="#xss" class="headerlink" title="xss"></a>xss</h1><p> 在文本里面发 js 信息,<br> nunjucks 默认打开 xss, 把 符号 转义, 不执行代码.</p>
<ol>
<li>转义</li>
<li>保护好 cookie</li>
</ol>
<h1 id="express-的中间件"><a href="#express-的中间件" class="headerlink" title="express 的中间件"></a>express 的中间件</h1><h1 id="pm2-守护进程-防止程序出错"><a href="#pm2-守护进程-防止程序出错" class="headerlink" title="pm2 守护进程, 防止程序出错"></a>pm2 守护进程, 防止程序出错</h1><ul>
<li>查看 log 信息<br>cd ~/.pm2/logs</li>
</ul>
<p>、、</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/25/node11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="eddy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="node">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/25/node11/" itemprop="url">node11</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-25T15:47:19-08:00">
                2018-01-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>url(../node/node11)</p>
<h1 id="技巧"><a href="#技巧" class="headerlink" title="技巧"></a>技巧</h1><ul>
<li>用 || 来判断的时候, 数值类型一定要对应</li>
<li>loginRequired<br>在需要登录的操作加上 loginRequired, 这个情况下 request.method 有可能是 post, 也有可能是 get.</li>
<li>需不需要跳转页面可以用 <base_url>url=<next_url> , 这里 next_url 的 path 可以写在 form 表单里面得到.</next_url></base_url></li>
<li><p>api 传输数据标准</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">r.sucess?r.data : r.message</span><br><span class="line">dict = &#123;</span><br><span class="line">    success: true,</span><br><span class="line">    data: data,</span><br><span class="line">    message:&apos;&apos;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>http 模块的 protocol 是 ‘http:’</p>
</li>
<li>配置环境变量 process.env 查看环境变量, 也可以设置环境变量</li>
</ul>
<h1 id="express-技术"><a href="#express-技术" class="headerlink" title="express 技术"></a>express 技术</h1><ul>
<li>app.use((request, response) =&gt; {})</li>
</ul>
<h1 id="package-json-scriptes"><a href="#package-json-scriptes" class="headerlink" title="package.json scriptes"></a>package.json scriptes</h1><p>思考: 是否可以通过 fs.watch 来实现保存自动刷新页面</p>
<ul>
<li>yarn run dev  监听项目变化, 自动重启<br>dev: nodemon app.js</li>
<li>yarn run start<br>start: om2 start app.js</li>
</ul>
<h1 id="nunjucks"><a href="#nunjucks" class="headerlink" title="nunjucks"></a>nunjucks</h1><ul>
<li>管道<br>上一个的输出作为下一个的输入</li>
</ul>
<h1 id="node-循环依赖的问题的解决"><a href="#node-循环依赖的问题的解决" class="headerlink" title="node 循环依赖的问题的解决"></a>node 循环依赖的问题的解决</h1><p>在要使用的函数里面 require 其他文件的函数</p>
<h1 id="linux-修改权限"><a href="#linux-修改权限" class="headerlink" title="linux 修改权限"></a>linux 修改权限</h1><ul>
<li>更改用户组<br>sudo chown -R ubuntu:ubuntu /home/ubuntu</li>
<li>修改用户组权限<br>chmode -R g-rwx /home/ubuntu/.ssh<br>chmode -R o-rwx /home/ubuntu/.ssh</li>
<li>复制文件到 root<br>cp /home/ubuntu/.ssh/authorized_keys  /root/.ssh/authorized_keys</li>
<li>如果显示permission denied 就加 sudo</li>
<li>也可以给用户规定权限写死 不让使用 sudo</li>
</ul>
<h1 id="api-的形式传输数据"><a href="#api-的形式传输数据" class="headerlink" title="api 的形式传输数据"></a>api 的形式传输数据</h1><ul>
<li>减少数据量, 加快响应速度</li>
<li>更加自由</li>
</ul>
<h1 id="前端两种处理报错的方式"><a href="#前端两种处理报错的方式" class="headerlink" title="前端两种处理报错的方式"></a>前端两种处理报错的方式</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1. ajax(&#123;</span><br><span class="line">    url: url,</span><br><span class="line">    method: method,</span><br><span class="line">    data: data,</span><br><span class="line">    success: function(r)&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">    error: function(e)&#123;</span><br><span class="line">            // 406</span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">2. 第二种推荐</span><br><span class="line">    sucess: if (r.success)&#123;</span><br><span class="line">                sucessResponse(r.data)</span><br><span class="line">             &#125; else&#123;</span><br><span class="line">                errorResponse(r.message)</span><br><span class="line">             &#125;</span><br><span class="line">    error: function(e)&#123;</span><br><span class="line">            // globalErrorResponse</span><br><span class="line">            var r = &#123;</span><br><span class="line">                success: false,</span><br><span class="line">                data: null,</span><br><span class="line">                message: &apos;error&apos;</span><br><span class="line">            &#125;</span><br><span class="line">            globalErrorResponse(r)</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h1 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h1><ul>
<li>标志报错信息: No ‘access-control-allow-origin’</li>
<li>端口不一样就会跨域, protocol, host, port</li>
<li>jonsp 也要后端配合, 只能处理 get 方式的请求</li>
<li>解决方式 cors<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node 配置 cors, 就直接可以配置 cors了</span><br><span class="line">const cors = require(&apos;cors&apos;)</span><br><span class="line">app.use(cors())</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="前后端分离"><a href="#前后端分离" class="headerlink" title="前后端分离"></a>前后端分离</h1><p>这里只的是开发环境上的分离</p>
<ol>
<li>普通开发模式<br>前端写客户端, 后端写 api 服务端</li>
</ol>
<ul>
<li><p>问题:</p>
<ul>
<li>前端需要搭建后端的开发环境, 然后运行后端的项目, 瘸腿.</li>
<li>前后端对接的时候后端改动一个地方, 前端可能需要更新项目代码, git pull 之后发现需要更新更多的代码</li>
</ul>
</li>
<li><p>另外一种方式: 前后端在两个环境里面, 后端设置好 cors 解决跨域的问题</p>
</li>
</ul>
<ol>
<li>前后端分离</li>
</ol>
<ul>
<li><p>办法:</p>
<ul>
<li>用 node 做转发服务器,</li>
<li>通过配置 nginx 的方式在实现分离</li>
</ul>
</li>
<li><p>流程:</p>
<ul>
<li>node 把请求发送到 api server, api server 处理好请求并且返回响应</li>
<li>node 接受 api server 返回的响应, 并且把这个响应发送到浏览器端</li>
<li>浏览器接受响应, 渲染页面</li>
</ul>
</li>
</ul>
<h1 id="前端自己开发环境-独立配置-bridge"><a href="#前端自己开发环境-独立配置-bridge" class="headerlink" title="前端自己开发环境, 独立配置, bridge"></a>前端自己开发环境, 独立配置, bridge</h1><p>作用: 原样模拟客户端的请求发送到服务器<br>用node 使用 http 模块,<br>express 和 nunjuncks 相互使用<br>不管发什么请求, 都有一些基本的配置项 apiOptions<br>app.all 可以匹配 api 下面的所有请求 app.all(/api/*)  </p>
<p>//</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">eddy</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">eddy</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
